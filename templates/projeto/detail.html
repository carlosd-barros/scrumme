{% extends 'base.html' %}

{% block title %}Projeto Detalhes{% endblock title %}

{% block main %}

<a class="text" href="{% url 'core:projeto_list' %}" aria-pressed="true">Projetos</a>
<h1 class="margin-none">Detalhes</h1>

<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h5 class="m-0 font-weight-bold text-primary text-captalize">{{ object.name }}</h5>
    </div>
    <div class="card-body">

        <div class="row">
            <div class="col-md-6">
                <div><strong>Lider</strong></div>
                {{ object.responsavel.name }}
            </div>

            <div class="col-md-6">
                <div><strong>Criada em</strong></div>
                {{ object.created|date:'d/m/Y' }}
            </div>
        </div>
        <br/>

        <div class="row">
            <div class="col-md-6">
                <div><strong>Integrantes</strong></div>
                <ul>
                    {% for integrante in object.equipe.team.all %}
                        <li>
                            {{ integrante.name }}
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="col-md-6">
                <div><strong>Última atualização</strong></div>
                {{ object.updated|date:'d/m/Y' }}
            </div>
        </div>

    </div>
</div>


<h2>Quests relacionadas</h2> <hr> <br>

<table class="table table-striped table-datatables">

    <thead>
        <tr>
            <th>Nome</th>
            <th class="text-center">Responsáveis</th>
            <th class="text-center">Inicio</th>
            <th class="text-center">Entrega</th>
            <th class="text-center">Ações</th>
        </tr>
    </thead>

    <tbody>
        {% for quest in quests %}
        <tr>
            <td>{{ quest.name }}</td>
            <td class="text-center">{{ quest.responsaveis.all|length }}</td>
            <td class="text-center">{{ quest.init_date|date:'d/m/Y' }}</td>
            <td class="text-center">{{ quest.end_date|date:'d/m/Y' }}</td>

            <td class="actions text-center align-middle">
            <div class="btn-group">

                <a class="btn btn-outline-secondary"
                href="{% url 'core:quest_detail' quest.pk %}"
                title="Visualizar">
                    <span class="icon text-white-600">
                    <i class="fas fa-eye"></i>
                    </span>
                </a>

                <a class="btn btn-outline-primary"
                href="{% url 'core:quest_update' quest.pk %}"
                title="Editar">
                    <i class="fas fa-edit"></i>
                </a>

                <a class="btn btn-outline-danger"
                href="{% url 'core:quest_delete' quest.pk %}"
                title="Excluir">
                    <i class="fas fa-trash-alt"></i>
                </a>

                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock main %}

