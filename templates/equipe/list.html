{% extends 'base.html' %}
{% load static %}

{% block title %}List{% endblock title %}

{% block css %} {% endblock css %}

{% block main %}

<h1>Suas Equipes</h1>
<hr/>
  <div class="card shadow mb-4">
    <div class="card-header py-3">
      <h6 class="m-0 font-weight-bold text-primary">Equipes: {{object_list|length}}</h6>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
          <thead>
            <tr>
              <th class="center">Nome</th>
              <th class="center">Lider</th>
              <th class="center">Time</th>
              <th class="center">Ativo</th>
              <th class="center">Ações</th>
            </tr>
          </thead>
          <tbody>
          {% for equipe in object_list %}
          <tr>
            <td class="center">{{equipe.name}}</td>
            <td class="center">{{equipe.lider}}</td>
            <td class="center">
              <ul>
                {% for integrante in equipe.team.all %}
                  <li>
                    {{ integrante }}
                  </li>
                {% endfor %}
                </ul>
            </td>
            <td class="center">

              {% if equipe.active %}
                <p>ATIVO</p>
              {% else %}
                <p>DESATIVADO</p>
              {% endif %}

            </td>
            <td class="center actions">
              <div class="btn-group">
                <div class="col-md-18 text-center">
                  <a class="btn btn-info btn-icon-split btn-sm"
                  href="{% url 'core:equipe_detail' equipe.pk %}"
                  title="Visualizar">
                    <span class="icon text-white-600">
                      <i class="fas fa-eye"></i>
                    </span>
                  </a>
  
                  <a class="btn btn-success btn-icon-split btn-sm"
                    href="{% url 'core:equipe_update' equipe.pk %}"
                    title="Editar">
                    <span class="icon text-white-600" >
                      <i class="fas fa-edit"></i>
                    </span>
                  </a>
  
                  <a class="btn btn-danger btn-icon-split btn-sm"
                  href="{% url 'core:equipe_delete' equipe.pk %}"
                  title="Excluir">
                    <span class="icon text-white-600">
                      <i class="fas fa-trash"></i>
                    </span>
                  </a>

                </div>
              </div>
            </td>
          </tr>
          {% endfor %}
      </table>
      <!-- paginação -->
      <section style="float: right;">
          {% if is_paginated %}

          {% if page_obj.has_previous %}
            <a class="btn btn-outline-info mb-4" href="?page=1">Primeiro</a>
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Anterior</a>
          {% endif %}

          {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
              <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>

            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
              <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
  
            {% endif %}
          {% endfor %}

          {% if page_obj.has_next %}
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Próximo</a>
            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Último</a>
          {% endif %}

        {% endif %}
        <!-- fim paginação -->
      </section>
    </div>
  </div>
</div>
{% endblock main %}

{% block js %}

<!-- Page level plugins -->
<script src="{% static 'custom/vendor/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'custom/vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>

<!-- Page level custom scripts -->
<!-- <script src="{% static 'custom/js/demo/datatables-demo.js' %}"></script> -->

{% endblock js %}

